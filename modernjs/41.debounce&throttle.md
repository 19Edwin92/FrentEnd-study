## 41.Debounce&Throttle
디바운스와 스로틀은 공부는 했지만, 이전 프로젝트에서 적용하지 못했던 부분이 있었다. 그 결과 UserTest에서 좋지 못한 평가를 받았다. 오늘은 해당 주제에 대해서 다뤄보자. 

### 1. 디바운스와 스로틀이 필요한 상황
<span style="color:orange">모던자바스크립트</span>에 따르면, 디바운스와 스로틀은 `Scroll`, `Resize`, `Input`, `Mousemove` 같은 이벤트와 관련있다. 이와 같은 이벤트들이 짧은 시간 간격으로 연속해서 발생을 일으키기 때문이다. 

연속적으로 발생되는 이벤트는 과도하게 호출되며 성능저하를 발생시킨다. <span style="color:orange">디바운스와 스로틀</span>은 짧은 시간 간격으로 연속해서 발생하는 이벤트를 그룹화해서 과도한 이벤트 헨들러의 호출을 방지하는 기법이다. 

<details>
<summary>첫째, 코드살펴보기(모던자바스크립트)</summary>

<div style="height: 400px; overflow-y: scroll;">

```html
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <button>Click Me</button>
  <br/><br/>
  <table style="text-align: justify; border:1px solid black">
    <tr style="color:lightcoral; border-bottom:1px soild black">
      <th width="150px" style="border-bottom:1px solid black">이벤트종류</th>
      <th width="100px" style="border-bottom:1px solid black">이벤트횟수</th>
    </tr>
    <tr>
      <td>일반 클릭</td>
      <td><span class="normal-msg">0</span></td>
    </tr>
    <tr>
      <td>디바운스 이벤트</td>
      <td><span class="debounce-msg">0</span></td>
    </tr>
    <tr>
      <td>스로틀 이벤트</td>
      <td><span class="throttle-msg">0</span></td>
    </tr>
  </table>  
  <script>
    const $button = document.querySelector('button')
    const $normalMsg = document.querySelector('.normal-msg')
    const $debounceMsg = document.querySelector('.debounce-msg')
    const $throttleMsg = document.querySelector('.throttle-msg')

    const debounce = (callback, delay) => {
      let tiemId;
      return (...args) => {
        if(tiemId) clearTimeout(tiemId);
        tiemId = setTimeout(callback, delay, ...args)
      }
    }

    const throttle = (callback, delay) => {
      let tiemId;
      return (...args) => {
        if(tiemId) return;
        tiemId = setTimeout(()=>{
          callback(...args);
          tiemId = null
        },delay)
      }
    }

    $button.addEventListener('click', () => {
      $normalMsg.textContent = +$normalMsg.textContent + 1;
    })

    $button.addEventListener('click', debounce(() => {
      $debounceMsg.textContent = +$debounceMsg.textContent +1;
    }, 1000));

    $button.addEventListener('click', throttle(() => {
      $throttleMsg.textContent = +$throttleMsg.textContent +1;
    }, 1000));

  </script>
</body>
</html>
```

</div>
</details>

